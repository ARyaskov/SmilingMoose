#ifndef GRAPHWIDGET_H
#define GRAPHWIDGET_H

#include <QGraphicsView>
#include "comfunctions.h"



/** Цвет состояния "Предупреждение" */
static QColor warning_color;

/** Цвет состояния "Ошибка" */
static QColor error_color;

/** Цвет состояния "Внимание" */
static QColor attention_color;

/**
 * Перечисление состояний программы.
 */
enum Action
{	
	SELECT,		/** Выбор объекта на сцене.			  */
	
	LIFELINE,	/** Добавление линии жизни.			  */
	
	MESSAGE,	/** Добавление сообщения.			  */
	
	CREATE,		/** Добавление сообщения создания.	  */
	
	DELETE,		/** Добавление сообщения удаления.	  */
	
	REPLY,		/** Добавление возвратного сообшения. */
	
	STOP,		/** Остановка линии жизни.			  */

	COMMENT		/** Добавление комментария.			  */
};

/**
 * Класс, реализующий виджет сцены для отрисовки диаграммы в главном окне.
 */
class GraphWidget : public QGraphicsView
{
	Q_OBJECT

public:
	/**
	 * Конструктор по умолчанию.
	 * @param parent Указатель на окно, в отором создается виджет.
	 */
	GraphWidget(QWidget *parent = 0);

	/**
	 * Десктруктор.
	 */
	~GraphWidget();

    /** 
	 * Функция возвращает указатель на объект пользовательского интерфейса
	 */
    Sumleditor* getParentWindow()const { return mainWnd; }

	/** 
	 * Функция проверяет есть ли на сцене линия жизни с таким же именем
	 */
	bool existDublicate();

	/** 
	 * Вернуть текущее действие.
	 * @return Текущее действие.
	 */
	Action getCurrentAct(){ return this->currentAct; }

	/** 
	 * Функция проверяет есть ли на сцене линия жизни с таким же именем
	 * @param newAct Новое действие.
	 */
	void setCurrentAct(Action newAct) { this->currentAct = newAct; }

	/** 
	 * Добавление на сцену линии жизни
	 * @param point Точка, в которую поместится объект
	 */
	void addLifeline(QPointF point);

private:
	QGraphicsScene* scene;  /** Указатель на динамический объект сцены. */

	Action currentAct;		/** Текущее действие. */

	Sumleditor *mainWnd;	/** Указатель на главное окно. */

protected:
	/** 
	 * Событие прокрутки колесика мыши.
	 * @param event Указатель на текущее событие.
	 */
	void wheelEvent(QWheelEvent *event);

	/** 
	 * Функция масштабирования сцены.
	 * @param scaleFactor Величина прокрутки.
	 */
	void scaleView(qreal scaleFactor);

	
	/** 
	 * Событие перемещения указателя мыши
	 * @param event Указатель на событие.
	 */
    void mouseMoveEvent ( QMouseEvent * event );

	/** 
	 * Событие нажатия на кнопку мыши
	 * @param event Указатель на событие.
	 */
    void mousePressEvent(QMouseEvent * event);

private slots:

};

#endif // GRAPHWIDGET_H









	///** Последний созданный объект. */
	//QGraphicsItem *lastItem;

	/** 
	 * ТЕСТОВЫЙ слот добавления объекта на сцену.
	 * @param isChecked Нажата ли кнопка.
	 */
	//void addObject(bool isChecked);



	/**
	 * Слот добавления комментария на сцену.
	 * @param isChecked Нажата ли кнопка.
	 */
	//void addComment();
